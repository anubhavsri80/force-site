<!DOCTYPE html>
<html>
<head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<link rel="stylesheet" href="lead_form.css">
</head>
<body>
	<iframe src="https://go.pardot.com/l/919353/2021-04-09/65l" width="100%" ></iframe>
	<div class="container">  
  <form id="lead_form" action="" method="post">
    <h3>Fill up the form</h3>
    <h4>Contact us for custom quote</h4>
    <fieldset>
	<label ><b>Name</b><abbr>*</abbr> &nbsp;&nbsp;</label>
      <input placeholder="Name" type="text" name="fname" tabindex="1" required autofocus>
    </fieldset>
    <fieldset>
	    <label ><b>Adderss</b>&nbsp;&nbsp;</label>
      <input placeholder="Adderss" type="text" name="lname" tabindex="2" >
    </fieldset>
    <fieldset>
	    <label ><b>Company</b><abbr>*</abbr> &nbsp;&nbsp;</label>
      <input placeholder="Company" type="text"  name="company"tabindex="3" required>
    </fieldset>
    <fieldset>
	    <label ><b>Email</b><abbr>*</abbr> &nbsp;&nbsp;</label>
      <input placeholder="Email address" type="email" name="email" tabindex="4" required>
    </fieldset>
    <fieldset>
	    <label ><b>Phone no.</b> &nbsp;&nbsp;</label>
      <input placeholder="Phone no." type="tel" name="phoneno" tabindex="5" ></textarea>
    </fieldset>
    <fieldset>
      <button name="submit" type="submit" id="lead_form-submit" data-submit="...Sending">Submit</button>
    </fieldset>
   
  </form>
	
</div>

<script type="text/javascript">
	const serialize_form = form => JSON.stringify(Array.from(new FormData(form).entries()).reduce((m, [key, value]) => Object.assign(m, {
		[key]: value
	}), {}));
	$('#lead_form').on('submit', function(event) {
		event.preventDefault();
		const json = serialize_form(this);
		console.log(json);
		/*	var xmlhttp = new XMLHttpRequest();   // new HttpRequest instance 
	var theUrl = "https://leadgenerationgkn-developer-edition.ap16.force.com/GetData/services/apexrest/myservice/";
	xmlhttp.open("POST", theUrl);
	xmlhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
	xmlhttp.send(json); */
		$.ajax({
			type: 'POST',
			//https://site-gkns-developer-edition.ap16.force.com/web2lead/services/apexrest/leadgenerationservice
			//url: 'https://leadgenerationgkn-developer-edition.ap16.force.com/GetData/services/apexrest/myservice/',
			//url: 'https://site-gkns-developer-edition.ap16.force.com/web2lead/services/apexrest/leadgenerationservice',
			url:'https://gksapp-developer-edition.ap16.force.com/services/apexrest/myservice',
			dataType: 'json',
			data: json,
			contentType: 'application/json',
			success: function(data) {
				alert(data)
			}
		});
	});
	</script>

</body>
</html>
